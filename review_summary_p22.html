<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملخص المراجعة - C++ Learning Lab</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            background-color: #f8f9fa;
            color: #212529;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1, h2, h3, h4 {
            color: #0056b3; /* A nice blue for headings */
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-top: 24px;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.75em; }
        h3 { font-size: 1.5em; }
        h4 { font-size: 1.25em; color: #007bff; border-bottom: none; }
        p {
            margin-bottom: 1em;
        }
        code, .ltr {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            background-color: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            direction: ltr;
            display: inline-block;
        }
        pre {
            background-color: #282c34; /* Dark background for code blocks */
            color: #abb2bf; /* Light text for code blocks */
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            white-space: pre-wrap;
            direction: ltr;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        strong {
            color: #d9534f; /* A reddish color for emphasis */
            font-weight: 600;
        }
        .summary {
            background-color: #fff3cd; /* Light yellow for summary box */
            border-left: 5px solid #ffeeba;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
        .arrow {
            font-size: 1.5em;
            color: #007bff;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ملخص المراجعة: رحلة البيانات من سطر نصي إلى سجل منظم</h1>
        <p>اليوم، قمنا بربط كل المهارات التي تعلمناها سابقاً لنحل مشكلة أساسية في البرمجة: كيف نأخذ بيانات خام (سطر نصي) ونحولها إلى شيء منظم ومفهوم للكمبيوتر. في C++، هذا الهيكل المنظم يسمى <strong><code>struct</code></strong>.</p>

        <h2>أولاً: الأدوات التي كانت في جعبتنا</h2>
        <p>قبل أن نبدأ، كان لدينا بالفعل أداتان قويتان قمنا ببنائهما سابقاً:</p>

        <h4>1. الأداة الأولى: قالب البيانات (<code>struct sClient</code>)</h4>
        <p><strong>ما هو؟</strong> هو ببساطة قالب أو "بطاقة تعريف" فارغة قمنا بتصميمها لتمثل أي عميل بنك. بدلاً من التعامل مع متغيرات متناثرة، يجمع لنا كل معلومات العميل في مكان واحد منظم.</p>
        <pre><code class="language-cpp">// هذا هو القالب الذي سنصب فيه البيانات
struct sClient {
    string AccountNumber;
    string PinCode;
    string Name;
    string Phone;
    double AccountBalance;
};</code></pre>

        <h4>2. الأداة الثانية: أداة التقطيع (<code>SplitString</code>)</h4>
        <p><strong>ما هي؟</strong> هي الدالة التي أتقنتِها تماماً. وظيفتها هي أخذ أي سلسلة نصية وتقطيعها إلى أجزاء صغيرة بناءً على فاصل معين. نحتاجها لأن البيانات في السطر النصي مدمجة معاً، وهذه الأداة تفصل كل معلومة عن الأخرى.</p>

        <h2>ثانياً: حل المشكلة الكبرى - الدالة المحورية <code>ConvertLinetoRecord</code></h2>
        <p>هذه هي الدالة التي عملنا عليها اليوم. هدفها هو استخدام الأدوات السابقة لتحويل سطر بيانات إلى سجل عميل مكتمل. لنرَ كيف تعمل خطوة بخطوة:</p>
        
        <h3>المدخلات (Input):</h3>
        <p>نبدأ بسطر نصي واحد، حيث يفصل بين كل معلومة وأخرى فاصل مميز.</p>
        <pre><code>string Line = "A150#//#1234#//#Mohammed#//#079999#//#5270.00";</code></pre>

        <hr style="margin: 2em 0;">

        <h3>الخطوة 1: استدعاء أداة التقطيع <code>SplitString</code></h3>
        <p>نقوم أولاً بتمرير السطر الكامل إلى دالتنا <code>SplitString</code> لتقوم بتفكيكه إلى أجزاء أصغر.</p>
        <pre><code class="language-cpp">// داخل دالة ConvertLinetoRecord
vector&lt;string&gt; vClientData = SplitString(Line, "#//#");</code></pre>
        <p><strong>النتيجة:</strong> أصبح لدينا الآن مصفوفة ديناميكية (تُسمى في C++ باسم <strong><code>vector</code></strong>) تحتوي على كل معلومة في خانة منفصلة:</p>
        <pre><code>vClientData = [ "A150", "1234", "Mohammed", "079999", "5270.00" ]
// Index:        [0]     [1]       [2]         [3]         [4]</code></pre>
        
        <h3>الخطوة 2: إنشاء قالب (<code>struct</code>) فارغ وتعبئته من المصفوفة (<code>vector</code>)</h3>
        <p>الآن بعد أن أصبحت البيانات مفصولة ومنظمة في الـ <code>vector</code>، يمكننا بسهولة تعبئة قالب <code>sClient</code> الخاص بنا. الـ <code>vector</code> يعمل تماماً مثل <strong>الجسر</strong> بين النص الخام والسجل المنظم.</p>
        
        <h4>عملية "صب" البيانات من الـ <code>vector</code> إلى الـ <code>struct</code>:</h4>
        <pre><code class="language-cpp">
// 1. نُنشئ "بطاقة تعريف" فارغة
sClient Client;

// 2. نبدأ عملية التعبئة بالترتيب، عنصر تلو الآخر
Client.AccountNumber = vClientData[0]; // "A150"
Client.PinCode       = vClientData[1]; // "1234"
Client.Name          = vClientData[2]; // "Mohammed"
Client.Phone         = vClientData[3]; // "079999"
Client.AccountBalance = stod(vClientData[4]); // 5270.00
        </code></pre>
        <p><strong>ملاحظة خاصة:</strong> لاحظي السطر الأخير. حقل الرصيد <code>AccountBalance</code> هو من نوع رقم عشري (<code>double</code>)، بينما القيمة في المصفوفة هي نص (<code>string</code>). لذلك، كان لا بد من تحويلها. استخدمنا دالة جاهزة اسمها <strong><code>stod</code></strong> وهي اختصار لـ (<strong>st</strong>ring <strong>to</strong> <strong>d</strong>ouble) لتقوم بهذه المهمة.</p>

        <h3>المخرجات (Output):</h3>
        <p>في النهاية، تُرجع الدالة المتغير <code>Client</code>، الذي لم يعد فارغاً، بل هو قالب بيانات <code>struct</code> مكتمل ومنظم يحتوي على جميع بيانات العميل وجاهز للاستخدام.</p>

        <div class="summary">
            <h3>الخلاصة النهائية</h3>
            <p>المهارة الحقيقية التي تعلمناها اليوم هي <strong>"تجميع الأدوات"</strong>. لم نكتب دالة معقدة من الصفر، بل قمنا ببناء دالة (<code>ConvertLinetoRecord</code>) تستخدم بذكاء دالة أخرى أبسط (<code>SplitString</code>) لإنجاز مهمتها. هذا المفهوم—إعادة استخدام الكود وتجزئة المشاكل—هو جوهر البرمجة الفعالة والنظيفة.</p>
        </div>
    </div>
</body>
</html>